<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>define skate702</title>

    <style>
        body {
            background: #111;
            color: #EEE;
        }

        #loadingFonts {
            visibility: hidden;
        }
    </style>
    <link rel="stylesheet" href="css/all.css">
</head>

<body>
    <div id="loadingFonts">Hello World!
        <i class="fas fa-glasses"></i>
        <i class="far fa-glasses"></i>
        <i class="fal fa-glasses"></i>
        <i class="fad fa-glasses"></i>
    </div>
    <!--<i class="fa-duotone fa-glasses"></i>
    <i class="fa-duotone fa-bug"></i>
    <i class="fa-duotone fa-poo-storm"></i>
    <i class="fa-duotone fa-gear"></i>
    <i class="fa-duotone fa-binary"></i>
    <i class="fa-duotone fa-camera"></i>
    <i class="fa-duotone fa-cassette-tape"></i>
    <i class="fa-duotone fa-display-code"></i>
    <i class="fa-duotone fa-file-code"></i>
    <i class="fa-duotone fa-hot-tub-person"></i>
    <i class="fa-duotone fa-list-ul"></i>
    <i class="fa-duotone fa-mug-hot"></i>
    <i class="fa-duotone fa-rotate-right"></i>
    <i class="fa-duotone fa-graduation-cap"></i>
    <i class="fa-duotone fa-book-sparkles"></i>
    <i class="fa-duotone fa-brain"></i>
    <i class="fa-duotone fa-headset"></i>
    <i class="fa-duotone fa-puzzle"></i>
    <i class="fa-duotone fa-dice"></i>
    <i class="fa-duotone fa-magnet"></i>
    <i class="fa-duotone fa-magnifying-glass"></i>
    <i class="fa-duotone fa-video"></i>
    <i class="fa-duotone fa-lock-keyhole"></i>
    <i class="fa-duotone fa-flask"></i>
    <i class="fa-duotone fa-alien-8bit"></i>
    <i class="fa-duotone fa-coffee-beans"></i>
    <i class="fa-duotone fa-code-pull-request"></i>
    <i class="fa-duotone fa-dial"></i>
    <i class="fa-duotone fa-diagram-project"></i>
    <i class="fa-duotone fa-person-snowboarding"></i>
    <i class="fa-duotone fa-square-terminal"></i>
    <i class="fa-duotone fa-block-brick"></i>
    <i class="fa-duotone fa-face-awesome"></i>
    <i class="fa-duotone fa-broccoli"></i>
    <i class="fa-duotone fa-whiskey-glass-ice"></i>
    <i class="fa-duotone fa-gamepad-modern"></i>
    <i class="fa-duotone fa-aperture"></i>
    <i class="fa-duotone fa-function"></i>
    <i class="fa-duotone fa-torii-gate"></i>
    <i class="fa-duotone fa-guitar-electric"></i>
    <i class="fa-duotone fa-music"></i>
    <i class="fa-duotone fa-wave-pulse"></i>
    <i class="fa-duotone fa-server"></i>
    <i class="fa-duotone fa-wrench"></i>
    <i class="fa-duotone fa-bowl-chopsticks-noodles"></i>
    <i class="fa-duotone fa-sushi-roll"></i>
    <i class="fa-duotone fa-shrimp"></i>
    <i class="fa-duotone fa-box-open"></i>
    <i class="fa-duotone fa-lightbulb-on"></i>
    <i class="fa-duotone fa-sliders"></i>
    <i class="fa-duotone fa-code"></i>
    <i class="fa-duotone fa-cloud-arrow-up"></i>
    <i class="fa-duotone fa-leaf"></i>
    <i class="fa-duotone fa-database"></i>
    <i class="fa-duotone fa-microchip"></i>
    <i class="fa-duotone fa-semicolon"></i>
    <i class="fa-duotone fa-microphone-lines"></i>
    <i class="fa-duotone fa-honey-pot"></i>
    <i class="fa-duotone fa-clipboard-check"></i>
    <i class="fa-duotone fa-cat"></i>
    <i class="fa-duotone fa-chart-user"></i>
    <i class="fa-duotone fa-badge-check"></i>
    <i class="fa-duotone fa-film-simple"></i>
    <i class="fa-duotone fa-game-console-handheld"></i>
    <i class="fa-duotone fa-podcast"></i>
    <i class="fa-duotone fa-share-nodes"></i>
    <i class="fa-duotone fa-duck"></i>
    <i class="fa-duotone fa-speaker"></i>
    <i class="fa-duotone fa-fingerprint"></i>
    <i class="fa-duotone fa-cactus"></i>
    <i class="fa-duotone fa-piano-keyboard"></i>
    <i class="fa-duotone fa-cube"></i>
    <i class="fa-duotone fa-door-open"></i>
    <i class="fa-duotone fa-shield"></i>
    <i class="fa-duotone fa-house-signal"></i>
    <i class="fa-duotone fa-radiation"></i>
    <i class="fa-duotone fa-rings-wedding"></i>
    <i class="fa-duotone fa-code-commit"></i>
    <i class="fa-duotone fa-notes"></i>
    <i class="fa-duotone fa-infinity"></i>
    <i class="fa-duotone fa-block-question"></i>
    <i class="fa-duotone fa-burger-cheese"></i>
    <i class="fa-duotone fa-eclipse"></i>
    <i class="fa-duotone fa-beer-mug"></i>
    <i class="fa-duotone fa-box-archive"></i>
    <i class="fa-duotone fa-usb-drive"></i>
    <i class="fa-duotone fa-question"></i>
    <i class="fa-duotone fa-cookie-bite"></i>
    <i class="fa-duotone fa-floppy-disk"></i>
    <i class="fa-duotone fa-sd-card"></i>
    <i class="fa-duotone fa-hexagon"></i>
    <i class="fa-duotone fa-vr-cardboard"></i>
    <i class="fa-duotone fa-pizza-slice"></i>
    <i class="fa-duotone fa-hundred-points"></i>
    <i class="fa-duotone fa-wine-glass"></i>
    <i class="fa-duotone fa-snowflakes"></i>
    <i class="fa-duotone fa-clapperboard-play"></i>
    <i class="fa-duotone fa-air-conditioner"></i>
    <i class="fa-duotone fa-chart-simple"></i>
    <i class="fa-duotone fa-robot"></i>
    <i class="fa-duotone fa-pi"></i>-->

    <div id="content">
        <canvas id="main" width=1280 height=720>
        </canvas>
    </div>

    <script>
        const iconIds = ["glasses", "bug", "poo-storm", "gear", "binary", "camera", "cassette-tape", "display-code", "file-code", "hot-tub-person", "list-ul", "mug-hot", "rotate-right", "graduation-cap", "book-sparkles", "brain", "headset", "puzzle", "dice", "magnet", "magnifying-glass", "video", "lock-keyhole", "flask", "alien-8bit", "coffee-beans", "code-pull-request", "dial", "diagram-project", "person-snowboarding", "square-terminal", "block-brick", "face-awesome", "broccoli", "whiskey-glass-ice", "gamepad-modern", "aperture", "function", "torii-gate", "guitar-electric", "music", "wave-pulse", "server", "wrench", "bowl-chopsticks-noodles", "sushi-roll", "shrimp", "box-open", "lightbulb-on", "sliders", "code", "cloud-arrow-up", "leaf", "database", "microchip", "semicolon", "microphone-lines", "honey-pot", "clipboard-check", "cat", "chart-user", "badge-check", "film-simple", "game-console-handheld", "podcast", "share-nodes", "duck", "speaker", "fingerprint", "cactus", "piano-keyboard", "cube", "door-open", "shield", "house-signal", "radiation", "rings-wedding", "code-commit", "notes", "infinity", "block-question", "burger-cheese", "eclipse", "beer-mug", "box-archive", "usb-drive", "question", "cookie-bite", "floppy-disk", "sd-card", "hexagon", "vr-cardboard", "pizza-slice", "hundred-points", "wine-glass", "snowflakes", "clapperboard-play", "air-conditioner", "chart-simple", "robot", "pi", "square-heart", "otter", "flower-tulip"]

        const iconCodes = ["f0ca", "e15b", "f00e", "f233", "f2f7", "f1de", "e448", "f0ee", "e32a", "f67e", "f7cf", "f7b6", "f7ce", "f5f8", "f672", "f386", "f530", "f8bb", "f534", "f81b", "e3fa", "f5ce", "f6d8", "f0ad", "f818", "f8bc", "f577", "f121", "e202", "f593", "f8f4", "e012", "f749", "f6b8", "f2f9", "e3dc", "f5dc", "e165", "f03d", "f542", "e33b", "f590", "f522", "f75a", "f188", "f8ab", "e48b", "f1c9", "f544", "f8f6", "f19d", "e2df", "f030", "f539", "f001", "f7f1", "e474", "f06c", "f661", "f7b9", "f0c3", "f8a7", "f336", "f6a3", "f7a1", "f2ce", "f1e0", "f1c0", "f2db", "f6be", "e132", "f3c2", "e240", "f1b3", "e13f", "e41c", "e443", "e418", "f8e0", "f49c", "e2ea", "f312", "f0fc", "f729", "f564", "f076", "f3a0", "e409", "f013", "f8d5", "f52b", "e3e2", "e183", "3b", "f46c", "f187", "3f", "f6a1", "f8be", "e3dd", "f8e9", "f4c8", "f700", "f801"]

        function drawDuotoneIcon(iconUnicode, colorA, colorB, fontSize, x, y) {
            const canvas = document.getElementById("main");
            const ctx = canvas.getContext('2d');

            ctx.textBaseline = 'middle';
            ctx.textAlign = "center";
            ctx.font = `900 ${fontSize}px "Font Awesome 6 Duotone"`;

            const textMetrics = ctx.measureText(String.fromCodePoint(parseInt(iconUnicode, 16)));
            const realFontSize = Math.min(fontSize, fontSize * ((fontSize + 5) / textMetrics.width));
            ctx.font = `900 ${realFontSize}px "Font Awesome 6 Duotone"`;

            ctx.fillStyle = colorA;
            ctx.fillText(String.fromCodePoint(parseInt(iconUnicode, 16)), x, y);

            ctx.fillStyle = colorB;
            ctx.fillText(String.fromCharCode(parseInt(iconUnicode, 16), parseInt(iconUnicode, 16)), x, y);
        }

        function drawIconNegative(iconUnicode, colorFront, colorBack, fontSize, x, y) {
            const canvas = document.getElementById("main");
            const ctx = canvas.getContext('2d');

            ctx.textBaseline = 'middle';
            ctx.textAlign = "center";
            ctx.font = `900 ${fontSize}px "Font Awesome 6 Pro"`;

            const textMetrics = ctx.measureText(String.fromCodePoint(parseInt(iconUnicode, 16)));
            const realFontSize = Math.min(fontSize, fontSize * ((fontSize + 5) / textMetrics.width));
            ctx.font = `900 ${realFontSize}px "Font Awesome 6 Pro"`;

            drawHexagon(ctx, colorFront, x, y);

            ctx.fillStyle = colorBack;
            ctx.fillText(String.fromCodePoint(parseInt(iconUnicode, 16)), x, y);
        }

        function drawCircle(ctx, color, x, y) {
            ctx.beginPath();
            ctx.arc(x, y, 20, 0, 2 * Math.PI, false);
            ctx.fillStyle = color;
            ctx.fill();
        }

        function drawHexagon(ctx, color, x, y) {
            const a = 2 * Math.PI / 6;
            const r = 20;
            ctx.beginPath();
            for (var i = 0; i < 6; i++) {
                ctx.lineTo(x + r * Math.cos(a * i), y + r * Math.sin(a * i));
            }
            ctx.closePath();
            ctx.fillStyle = color;
            ctx.fill();
        }

        function fillBackground() {
            const canvas = document.getElementById("main");
            const ctx = canvas.getContext('2d');
            ctx.fillStyle = `#222222`;
            ctx.fillRect(0, 0, canvas.width, canvas.height);
        }

        function drawRandomDuotoneIcon(colorA, colorB, fontSize, x, y) {
            const randomIndex = Math.floor(Math.random() * iconCodes.length);
            const randomCode = iconCodes[randomIndex];
            console.log(randomIndex);
            console.log(randomCode);

            let randomColor = 'hsl(' + 360 * Math.random() + ',60%,60%)';
            
            if (Math.random() < 0.82) {
                randomColor = "#444";
            }
            
            drawIconNegative(randomCode, randomColor, "#222", fontSize, x, y);
            //drawDuotoneIcon(randomCode, colorA, colorB, fontSize, x, y);
        }

        function createImage() {
            fillBackground();

            const fontSize = 20;
            const distanceX = 60 * 1.05;
            const distanceY = 90 * 1.05;

            const canvas = document.getElementById("main");

            let secondRow = true;

            for (let x = distanceX; x < canvas.width; x += distanceX) {
                let y = secondRow ? distanceY : distanceY * 1.5;
                for (; y < canvas.height; y += distanceY) {
                    drawRandomDuotoneIcon("#EEE", "#BBB", fontSize, x, y);
                }
                secondRow = !secondRow;
            }
        }

        // TODO: Find cool layout, e.g. https://stackoverflow.com/questions/17125632/html5-canvas-rotate-object-without-moving-coordinates
        // - Mehr vertikaler als horizontaler Abstand?
        // - Random opacity?
        // - Leicht gedreht vs. exakt 45 grad?
        // - Gesamtes Bild leicht drehen (sieht gut aus!)
        // TODO: Fix icons (e.g. speakers, mic, lock)
        // TODO: Fix icon repetitions (shuffle array after 50 items + icon repetition detection?)
        // TODO: Update coloring
        // TODO: Custom coloring per unicode

        document.fonts.ready.then(() => {
            createImage();
        });
    </script>
</body>

</html>